<div class="d-flex justify-content-between align-items-center mb-4">
  <h2><i class="bi bi-gear me-2"></i>Product Management</h2>
  <a href="/admin/products/new" class="btn btn-primary">
    <i class="bi bi-plus-circle me-1"></i>Add New Product
  </a>
</div>

<% if (products.length === 0) { %>
  <div class="text-center py-5">
    <i class="bi bi-inbox display-1 text-muted"></i>
    <h4 class="mt-3 text-muted">No products yet</h4>
    <p class="text-muted">Start by adding your first product.</p>
    <a href="/admin/products/new" class="btn btn-primary mt-2">
      <i class="bi bi-plus-circle me-1"></i>Add Product
    </a>
  </div>
<% } else { %>
  <div class="card border-0 shadow-sm">
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead class="table-light">
          <tr>
            <th style="width: 60px;">Image</th>
            <th>Name</th>
            <th>Category</th>
            <th>Price</th>
            <th>S3 Image</th>
            <th style="width: 180px;">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% products.forEach(function(product) { %>
            <tr>
              <td>
                <img src="<%= product.image_url || '' %>"
                     alt="<%= product.name %>"
                     class="rounded"
                     style="width: 50px; height: 50px; object-fit: cover;"
                     onerror="this.onerror=null;this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2250%22 height=%2250%22%3E%3Crect width=%2250%22 height=%2250%22 fill=%22%230066cc%22/%3E%3Ctext x=%2225%22 y=%2230%22 text-anchor=%22middle%22 fill=%22white%22 font-family=%22Arial%22 font-size=%2210%22%3EN/A%3C/text%3E%3C/svg%3E'">
              </td>
              <td class="align-middle fw-semibold"><%= product.name %></td>
              <td class="align-middle">
                <% if (product.category) { %>
                  <span class="badge bg-light text-primary"><%= product.category %></span>
                <% } else { %>
                  <span class="text-muted">-</span>
                <% } %>
              </td>
              <td class="align-middle text-primary fw-semibold">$<%= parseFloat(product.price).toFixed(2) %></td>
              <td class="align-middle">
                <% if (product.s3_key) { %>
                  <span class="badge bg-success"><i class="bi bi-check"></i> S3</span>
                <% } else { %>
                  <span class="badge bg-secondary">Local</span>
                <% } %>
              </td>
              <td class="align-middle">
                <div class="btn-group btn-group-sm">
                  <a href="/products/<%= product.id %>" class="btn btn-outline-primary" title="View">
                    <i class="bi bi-eye"></i>
                  </a>
                  <a href="/admin/products/<%= product.id %>/edit" class="btn btn-outline-warning" title="Edit">
                    <i class="bi bi-pencil"></i>
                  </a>
                  <form action="/admin/products/<%= product.id %>?_method=DELETE" method="POST"
                        class="d-inline" onsubmit="return confirm('Are you sure you want to delete this product?')">
                    <button type="submit" class="btn btn-outline-danger btn-sm" title="Delete">
                      <i class="bi bi-trash"></i>
                    </button>
                  </form>
                </div>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="text-muted mt-3 small">
    <i class="bi bi-info-circle me-1"></i>Total: <%= products.length %> product(s)
  </div>
<% } %>
